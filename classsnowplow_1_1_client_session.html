<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Snowplow C++ Tracker" />
<meta property="og:description" content="Snowplow event tracker for C++. Add analytics to your C++ applications, games and servers" />
<meta property="og:url" content="https://github.com/snowplow/snowplow-cpp-tracker" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:title" content="Snowplow C++ Tracker" />
<meta name="twitter:description" content="Snowplow event tracker for C++. Add analytics to your C++ applications, games and servers" />
<!-- END twitter metadata -->
<title>Snowplow C++ Tracker: snowplow::ClientSession Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/snowplow/snowplow-cpp-tracker" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Snowplow C++ Tracker
   &#160;<span id="projectnumber">0.4.0-1-g8e96411</span>
   </div>
   <div id="projectbrief">Snowplow event tracker for C++. Add analytics to your C++ applications, games and servers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classsnowplow_1_1_client_session.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsnowplow_1_1_client_session-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">snowplow::ClientSession Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Keeps track of users sessions and can be configured to timeout after a certain amount of inactivity.  
 <a href="classsnowplow_1_1_client_session.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="client__session_8hpp_source.html">client_session.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a610781c39e1c2edb50f41d4f23f90887"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnowplow_1_1_client_session.html#a610781c39e1c2edb50f41d4f23f90887">ClientSession</a> (shared_ptr&lt; <a class="el" href="structsnowplow_1_1_session_store.html">SessionStore</a> &gt; session_store, unsigned long long foreground_timeout, unsigned long long background_timeout)</td></tr>
<tr class="memdesc:a610781c39e1c2edb50f41d4f23f90887"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new Client Session object.  <a href="classsnowplow_1_1_client_session.html#a610781c39e1c2edb50f41d4f23f90887">More...</a><br /></td></tr>
<tr class="separator:a610781c39e1c2edb50f41d4f23f90887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac889c23594e34eed8462e3685cf81c86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnowplow_1_1_client_session.html#ac889c23594e34eed8462e3685cf81c86">start_new_session</a> ()</td></tr>
<tr class="memdesc:ac889c23594e34eed8462e3685cf81c86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces a new session to be started when next event is tracked.  <a href="classsnowplow_1_1_client_session.html#ac889c23594e34eed8462e3685cf81c86">More...</a><br /></td></tr>
<tr class="separator:ac889c23594e34eed8462e3685cf81c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a5300b7e6965cba79a8ffc298a76a48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnowplow_1_1_client_session.html#a1a5300b7e6965cba79a8ffc298a76a48">set_is_background</a> (bool is_background)</td></tr>
<tr class="memdesc:a1a5300b7e6965cba79a8ffc298a76a48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the background state.  <a href="classsnowplow_1_1_client_session.html#a1a5300b7e6965cba79a8ffc298a76a48">More...</a><br /></td></tr>
<tr class="separator:a1a5300b7e6965cba79a8ffc298a76a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b8772cd635e5f9a527f2458a38939c3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnowplow_1_1_client_session.html#a1b8772cd635e5f9a527f2458a38939c3">get_is_background</a> ()</td></tr>
<tr class="memdesc:a1b8772cd635e5f9a527f2458a38939c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the background state.  <a href="classsnowplow_1_1_client_session.html#a1b8772cd635e5f9a527f2458a38939c3">More...</a><br /></td></tr>
<tr class="separator:a1b8772cd635e5f9a527f2458a38939c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c4b78c40076d814b8191099f6a4973"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsnowplow_1_1_self_describing_json.html">SelfDescribingJson</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsnowplow_1_1_client_session.html#a87c4b78c40076d814b8191099f6a4973">update_and_get_session_context</a> (const string &amp;event_id)</td></tr>
<tr class="memdesc:a87c4b78c40076d814b8191099f6a4973"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the session context while updating the session if necessary.  <a href="classsnowplow_1_1_client_session.html#a87c4b78c40076d814b8191099f6a4973">More...</a><br /></td></tr>
<tr class="separator:a87c4b78c40076d814b8191099f6a4973"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Keeps track of users sessions and can be configured to timeout after a certain amount of inactivity. </p>
<p >Activity is determined by how often events are sent with the <a class="el" href="classsnowplow_1_1_tracker.html" title="Singleton object that provides an interface to track Snowplow events.">Tracker</a>. Sessions are updated on on each tracked event.</p>
<p ><a class="el" href="classsnowplow_1_1_tracker.html" title="Singleton object that provides an interface to track Snowplow events.">Tracker</a> automatically appends session information as a context entity to each tracked event. Schema for the context entity: iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-1 </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a610781c39e1c2edb50f41d4f23f90887" name="a610781c39e1c2edb50f41d4f23f90887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a610781c39e1c2edb50f41d4f23f90887">&#9670;&nbsp;</a></span>ClientSession()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ClientSession::ClientSession </td>
          <td>(</td>
          <td class="paramtype">shared_ptr&lt; <a class="el" href="structsnowplow_1_1_session_store.html">SessionStore</a> &gt;&#160;</td>
          <td class="paramname"><em>session_store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long&#160;</td>
          <td class="paramname"><em>foreground_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long&#160;</td>
          <td class="paramname"><em>background_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new Client Session object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session_store</td><td>Defines the database where session data will be read and stored </td></tr>
    <tr><td class="paramname">foreground_timeout</td><td>Timeout in ms for updating the session when the app is in background </td></tr>
    <tr><td class="paramname">background_timeout</td><td>Timeout in ms for updating the session when the app is in foreground </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1b8772cd635e5f9a527f2458a38939c3" name="a1b8772cd635e5f9a527f2458a38939c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b8772cd635e5f9a527f2458a38939c3">&#9670;&nbsp;</a></span>get_is_background()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ClientSession::get_is_background </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the background state. </p>
<dl class="section return"><dt>Returns</dt><dd>true if set to background </dd>
<dd>
false if not in background </dd></dl>

</div>
</div>
<a id="a1a5300b7e6965cba79a8ffc298a76a48" name="a1a5300b7e6965cba79a8ffc298a76a48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5300b7e6965cba79a8ffc298a76a48">&#9670;&nbsp;</a></span>set_is_background()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientSession::set_is_background </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_background</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the background state. </p>
<p >In addition to setting the background state, the function checks for timeouts in the current session. It checks using timeouts belonging to the state before this transition, i.e., if the app is in foreground, and the <code>set_is_background</code> function is called with <code>true</code>, the timeouts are checked using the <code>foreground_timeout</code>. In case the session timed out, a new session is scheduled to be started and will be started when next event is tracked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_background</td><td>New background state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac889c23594e34eed8462e3685cf81c86" name="ac889c23594e34eed8462e3685cf81c86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac889c23594e34eed8462e3685cf81c86">&#9670;&nbsp;</a></span>start_new_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientSession::start_new_session </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forces a new session to be started when next event is tracked. </p>

</div>
</div>
<a id="a87c4b78c40076d814b8191099f6a4973" name="a87c4b78c40076d814b8191099f6a4973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87c4b78c40076d814b8191099f6a4973">&#9670;&nbsp;</a></span>update_and_get_session_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsnowplow_1_1_self_describing_json.html">SelfDescribingJson</a> ClientSession::update_and_get_session_context </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>event_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the session context while updating the session if necessary. </p>
<p >Session is updated in case the first event is tracked, or the time since last tracked event is longer than timeout passed in constructor (background timeout if in background or foreground timeout if in foreground). Each update is persisted in the SQLite database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event_id</td><td>Tracked event ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classsnowplow_1_1_self_describing_json.html" title="Self-describing JSON object used for defining self-describing events or custom context entities.">SelfDescribingJson</a> JSON with the session context </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="client__session_8hpp_source.html">client_session.hpp</a></li>
<li>src/<a class="el" href="client__session_8cpp.html">client_session.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesnowplow.html">snowplow</a></li><li class="navelem"><a class="el" href="classsnowplow_1_1_client_session.html">ClientSession</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
